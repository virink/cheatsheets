<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>NSPredicate</title>
<link href='style.css' rel='stylesheet'>
<link href='//dash_ref/Category/Format String Summary/1'>
<link href='//dash_ref_Format String Summary/Entry/Attribute name/0'>
<link href='//dash_ref_Format String Summary/Entry/Keypath/0'>
<link href='//dash_ref_Format String Summary/Entry/Templated for predicates/0'>
<link href='//dash_ref_Format String Summary/Entry/Substitution predicate/0'>
<link href='//dash_ref_Format String Summary/Entry/Example/0'>
<link href='//dash_ref/Category/Basic Comparisons/1'>
<link href='//dash_ref_Basic Comparisons/Entry/Equal/0'>
<link href='//dash_ref_Basic Comparisons/Entry/Grater or equal/0'>
<link href='//dash_ref_Basic Comparisons/Entry/Lesser or equal/0'>
<link href='//dash_ref_Basic Comparisons/Entry/Greater/0'>
<link href='//dash_ref_Basic Comparisons/Entry/Lesser/0'>
<link href='//dash_ref_Basic Comparisons/Entry/Different/0'>
<link href='//dash_ref_Basic Comparisons/Entry/In/0'>
<link href='//dash_ref_Basic Comparisons/Entry/Between/0'>
<link href='//dash_ref_Basic Comparisons/Entry/Example/0'>
<link href='//dash_ref/Category/Keypath Collection Queries/1'>
<link href='//dash_ref_Keypath Collection Queries/Entry/Average/0'>
<link href='//dash_ref_Keypath Collection Queries/Entry/Count/0'>
<link href='//dash_ref_Keypath Collection Queries/Entry/Min/0'>
<link href='//dash_ref_Keypath Collection Queries/Entry/Max/0'>
<link href='//dash_ref_Keypath Collection Queries/Entry/Sum/0'>
<link href='//dash_ref_Keypath Collection Queries/Entry/Example/0'>
<link href='//dash_ref/Category/Basic Compound Predicates/1'>
<link href='//dash_ref_Basic Compound Predicates/Entry/AND/0'>
<link href='//dash_ref_Basic Compound Predicates/Entry/OR/0'>
<link href='//dash_ref_Basic Compound Predicates/Entry/NOT/0'>
<link href='//dash_ref_Basic Compound Predicates/Entry/Example/0'>
<link href='//dash_ref/Category/Object, Array, and Set Operators/1'>
<link href='//dash_ref_Object, Array, and Set Operators/Entry/Distinct union of objects/0'>
<link href='//dash_ref_Object, Array, and Set Operators/Entry/Union of objects/0'>
<link href='//dash_ref_Object, Array, and Set Operators/Entry/Example/0'>
<link href='//dash_ref_Object, Array, and Set Operators/Entry/Distinct union of arrays/0'>
<link href='//dash_ref_Object, Array, and Set Operators/Entry/Union of arrays/0'>
<link href='//dash_ref_Object, Array, and Set Operators/Entry/Example/0'>
<link href='//dash_ref_Object, Array, and Set Operators/Entry/Distinct union of sets/0'>
<link href='//dash_ref/Category/String Comparison Operators/1'>
<link href='//dash_ref_String Comparison Operators/Entry/Begins with/0'>
<link href='//dash_ref_String Comparison Operators/Entry/Contains/0'>
<link href='//dash_ref_String Comparison Operators/Entry/Ends with/0'>
<link href='//dash_ref_String Comparison Operators/Entry/Like/0'>
<link href='//dash_ref_String Comparison Operators/Entry/Matches/0'>
<link href='//dash_ref_String Comparison Operators/Entry/Example/0'>
<link href='//dash_ref/Category/Aggregate Operators/1'>
<link href='//dash_ref_Aggregate Operators/Entry/Some, any/0'>
<link href='//dash_ref_Aggregate Operators/Entry/All/0'>
<link href='//dash_ref_Aggregate Operators/Entry/None/0'>
<link href='//dash_ref_Aggregate Operators/Entry/Example/0'>
<link href='//dash_ref/Category/Array Operations/1'>
<link href='//dash_ref_Array Operations/Entry/Array index/0'>
<link href='//dash_ref_Array Operations/Entry/Array first/0'>
<link href='//dash_ref_Array Operations/Entry/Array last/0'>
<link href='//dash_ref_Array Operations/Entry/Array size/0'>
<link href='//dash_ref_Array Operations/Entry/Example/0'>
<link href='//dash_ref/Category/Subqueries/1'>
<link href='//dash_ref_Subqueries/Entry/Subquery/0'>
<link href='//dash_ref_Subqueries/Entry/Example/0'>
<link href='//dash_ref/Category/Tip, Tricks and Examples/1'>
<link href='//dash_ref_Tip, Tricks and Examples/Entry/Common mistakes/0'>
<link href='//dash_ref_Tip, Tricks and Examples/Entry/Using self/0'>
<link href='//dash_ref_Tip, Tricks and Examples/Entry/LIKE wildcard match with * and ?/0'>
<link href='//dash_ref_Tip, Tricks and Examples/Entry/Quick tips/0'>
<link href='//dash_ref_Tip, Tricks and Examples/Entry/Keypath collection queries/0'>
<link href='//dash_ref_Tip, Tricks and Examples/Entry/How subqueries work/0'>
</head>
<body>
<header>
<h1>NSPredicate</h1>
</header>
<article>
<p></p>
<section class='category'>
<h2 id='//dash_ref/Category/Format String Summary/1'>
Format String Summary
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Format String Summary/Entry/Attribute name/0'>
<td class='description' colspan='2'>
<div class='name'><p>Attribute name</p>
</div>
<div class='notes'><p>Object&#39;s <code>attributeName</code> value is equal to value passed in</p>
<pre class="highlight objective_c"><span class="s">@"attributeName == %@"</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Format String Summary/Entry/Keypath/0'>
<td class='description' colspan='2'>
<div class='name'><p>Keypath</p>
</div>
<div class='notes'><p>Pass a string variable to <code>%K</code>, it will be represented as a keypath, then check if its value is equal to value passed in</p>
<pre class="highlight objective_c"><span class="s">"%K == %@"</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Format String Summary/Entry/Templated for predicates/0'>
<td class='description' colspan='2'>
<div class='name'><p>Templated for predicates</p>
</div>
<div class='notes'><p>Templated for predicate, checks if the value of key name is in <code>$NAME_LIST</code>. Uses <code>predicateWithSubstitutionVariables</code></p>
<pre class="highlight objective_c"><span class="s">@"%name IN $NAME_LIST"</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Format String Summary/Entry/Substitution predicate/0'>
<td class='description' colspan='2'>
<div class='name'><p>Substitution predicate</p>
</div>
<div class='notes'><p>Checks if the constant value <code>name</code> is in <code>$NAME_LIST</code>. Uses <code>predicateWithSubstitutionVariables</code></p>
<pre class="highlight objective_c"><span class="s">@"'name' IN $NAME_LIST"</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Format String Summary/Entry/Example/0'>
<td class='description' colspan='2'>
<div class='name'><p>Example</p>
</div>
<div class='notes'><pre class="highlight objective_c"><span class="p">[</span><span class="n">NSPredicate</span> <span class="nf">predicateWithFormat</span><span class="p">:</span> <span class="s">@"title == %@"</span><span class="p">,</span> <span class="s">@"minecraft"</span><span class="p">]</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Basic Comparisons/1'>
Basic Comparisons
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Basic Comparisons/Entry/Equal/0'>
<td class='description' colspan='2'>
<div class='name'><p>Equal</p>
</div>
<div class='notes'><p>Left hand expression is equal to right hand expression</p>
<pre class="highlight objective_c"><span class="o">=</span><span class="p">,</span><span class="o">==</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basic Comparisons/Entry/Grater or equal/0'>
<td class='description' colspan='2'>
<div class='name'><p>Grater or equal</p>
</div>
<div class='notes'><p>Left hand expression is greater than or equal to right hand expression</p>
<pre class="highlight objective_c"><span class="o">&gt;=</span><span class="p">,</span><span class="o">=&gt;</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basic Comparisons/Entry/Lesser or equal/0'>
<td class='description' colspan='2'>
<div class='name'><p>Lesser or equal</p>
</div>
<div class='notes'><p>Left hand expression is less than or equal to right hand expression</p>
<pre class="highlight objective_c"><span class="o">&lt;=</span><span class="p">,</span><span class="o">=&lt;</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basic Comparisons/Entry/Greater/0'>
<td class='description' colspan='2'>
<div class='name'><p>Greater</p>
</div>
<div class='notes'><p>Left hand expression is greater than right hand expression</p>
<pre class="highlight objective_c"><span class="o">&gt;</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basic Comparisons/Entry/Lesser/0'>
<td class='description' colspan='2'>
<div class='name'><p>Lesser</p>
</div>
<div class='notes'><p>Left hand expression is less than right hand expression</p>
<pre class="highlight objective_c"><span class="o">&lt;</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basic Comparisons/Entry/Different/0'>
<td class='description' colspan='2'>
<div class='name'><p>Different</p>
</div>
<div class='notes'><p>Left hand expression is not equal to right hand expression</p>
<pre class="highlight objective_c"><span class="o">!=</span><span class="p">,</span><span class="o">&lt;&gt;</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basic Comparisons/Entry/In/0'>
<td class='description' colspan='2'>
<div class='name'><p>In</p>
</div>
<div class='notes'><p>Left hand expression must appear in collection specified by right hand expression, i.e. <code>name IN {&#39;Milk&#39;, &#39;Eggs&#39;, &#39;Bread&#39;}</code></p>
<pre class="highlight objective_c"><span class="n">IN</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basic Comparisons/Entry/Between/0'>
<td class='description' colspan='2'>
<div class='name'><p>Between</p>
</div>
<div class='notes'><p>Left hand expression is between or equal to right hand expression, i.e. <code>1 BETWEEN {0, 33}</code>. If your left hand expression was 0 or 33 it would also make this true</p>
<pre class="highlight objective_c"><span class="n">BETWEEN</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basic Comparisons/Entry/Example/0'>
<td class='description' colspan='2'>
<div class='name'><p>Example</p>
</div>
<div class='notes'><pre class="highlight objective_c"><span class="p">[</span><span class="n">NSPredicate</span> <span class="nf">predicateWithFormat</span><span class="p">:</span> <span class="s">@"expenses BETWEEN {200, 400}"</span><span class="p">]</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Keypath Collection Queries/1'>
Keypath Collection Queries
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Keypath Collection Queries/Entry/Average/0'>
<td class='description' colspan='2'>
<div class='name'><p>Average</p>
</div>
<div class='notes'><p>Returns the average of the objects in the collection as an NSNumber</p>
<pre class="highlight objective_c"><span class="err">@avg</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Keypath Collection Queries/Entry/Count/0'>
<td class='description' colspan='2'>
<div class='name'><p>Count</p>
</div>
<div class='notes'><p>Returns the number of objects in a collection as an NSNumber</p>
<pre class="highlight objective_c"><span class="err">@count</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Keypath Collection Queries/Entry/Min/0'>
<td class='description' colspan='2'>
<div class='name'><p>Min</p>
</div>
<div class='notes'><p>Returns the minimum value of the objects in the collection as an NSNumber</p>
<pre class="highlight objective_c"><span class="err">@min</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Keypath Collection Queries/Entry/Max/0'>
<td class='description' colspan='2'>
<div class='name'><p>Max</p>
</div>
<div class='notes'><p>Returns the maximum value of the objects in the collection as an NSNumber</p>
<pre class="highlight objective_c"><span class="err">@max</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Keypath Collection Queries/Entry/Sum/0'>
<td class='description' colspan='2'>
<div class='name'><p>Sum</p>
</div>
<div class='notes'><p>Returns the sum of the objects in the collection based on the property</p>
<pre class="highlight objective_c"><span class="err">@sum</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Keypath Collection Queries/Entry/Example/0'>
<td class='description' colspan='2'>
<div class='name'><p>Example</p>
</div>
<div class='notes'><pre class="highlight objective_c"><span class="p">[</span><span class="n">NSPredicate</span> <span class="nf">predicateWithFormat</span><span class="p">:</span> <span class="s">@"expenses.@avg.doubleValue &lt; 200"</span><span class="p">]</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Basic Compound Predicates/1'>
Basic Compound Predicates
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Basic Compound Predicates/Entry/AND/0'>
<td class='description' colspan='2'>
<div class='name'><p>AND</p>
</div>
<div class='notes'><p>Logical AND</p>
<pre class="highlight objective_c"><span class="n">AND</span><span class="p">,</span><span class="o">&amp;&amp;</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basic Compound Predicates/Entry/OR/0'>
<td class='description' colspan='2'>
<div class='name'><p>OR</p>
</div>
<div class='notes'><p>Logical OR</p>
<pre class="highlight objective_c"><span class="n">OR</span><span class="p">,</span><span class="o">||</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basic Compound Predicates/Entry/NOT/0'>
<td class='description' colspan='2'>
<div class='name'><p>NOT</p>
</div>
<div class='notes'><p>Logical NOT</p>
<pre class="highlight objective_c"><span class="n">NOT</span><span class="p">,</span><span class="o">!</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basic Compound Predicates/Entry/Example/0'>
<td class='description' colspan='2'>
<div class='name'><p>Example</p>
</div>
<div class='notes'><pre class="highlight objective_c"><span class="p">[</span><span class="n">NSPredicate</span> <span class="nf">predicateWithFormat</span><span class="p">:</span> <span class="s">@"age == 40 AND price &gt; 67"</span><span class="p">]</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Object, Array, and Set Operators/1'>
Object, Array, and Set Operators
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Object, Array, and Set Operators/Entry/Distinct union of objects/0'>
<td class='description' colspan='2'>
<div class='name'><p>Distinct union of objects</p>
</div>
<div class='notes'><p>Returns an array containing the distinct objects in the property specified by the key path to the right of the operator</p>
<pre class="highlight objective_c"><span class="err">@distinctUnionOfObjects</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Object, Array, and Set Operators/Entry/Union of objects/0'>
<td class='description' colspan='2'>
<div class='name'><p>Union of objects</p>
</div>
<div class='notes'><p>Returns the same as <code>@distinctUnionOfObects</code> except it also includes duplicates</p>
<pre class="highlight objective_c"><span class="err">@unionOfObjects</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Object, Array, and Set Operators/Entry/Example/0'>
<td class='description' colspan='2'>
<div class='name'><p>Example</p>
</div>
<div class='notes'><pre class="highlight objective_c"><span class="n">NSArray</span> <span class="o">*</span><span class="n">payees</span> <span class="o">=</span> <span class="p">[</span><span class="n">transactions</span> <span class="nf">valueForKeyPath</span><span class="p">:</span><span class="s">@"@distinctUnionOfObjects.payee"</span><span class="p">]</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Object, Array, and Set Operators/Entry/Distinct union of arrays/0'>
<td class='description' colspan='2'>
<div class='name'><p>Distinct union of arrays</p>
</div>
<div class='notes'><p>Returns an array containing the distinct objects in the property specified by the key path to the right of the operator</p>
<pre class="highlight objective_c"><span class="err">@distinctUnionOfArrays</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Object, Array, and Set Operators/Entry/Union of arrays/0'>
<td class='description' colspan='2'>
<div class='name'><p>Union of arrays</p>
</div>
<div class='notes'><p>Returns the same as <code>@distinctUnionOfArrays</code> except it also includes duplicates</p>
<pre class="highlight objective_c"><span class="n">NOT</span><span class="p">,</span><span class="o">!</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Object, Array, and Set Operators/Entry/Example/0'>
<td class='description' colspan='2'>
<div class='name'><p>Example</p>
</div>
<div class='notes'><p>These must be run on an array of arrays. For example if you had:</p>
<pre class="highlight objective_c"><span class="n">NSArray</span> <span class="o">*</span><span class="n">arrayOfTransactions</span> <span class="o">=</span> <span class="p">[[</span><span class="n">Array</span> <span class="n">of</span> <span class="nf">transactions</span><span class="p">],</span> <span class="p">[</span><span class="n">Array</span> <span class="n">of</span> <span class="nf">transactions</span><span class="p">]]</span>&#x000A;<span class="n">NSArray</span> <span class="o">*</span><span class="n">payees</span> <span class="o">=</span> <span class="p">[</span><span class="n">arrayOfTransactions</span> <span class="nf">valueForKeyPath</span><span class="p">:</span><span class="s">@"@distinctUnionOfObjects.payee"</span><span class="p">]</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Object, Array, and Set Operators/Entry/Distinct union of sets/0'>
<td class='description' colspan='2'>
<div class='name'><p>Distinct union of sets</p>
</div>
<div class='notes'><p>Returns an NSSet instance containing distinct objects in the property specified by the key path to the right of the operator. Expects an NSSet instance containing NSSet instances</p>
<pre class="highlight objective_c"><span class="err">@distinctUnionOfSets</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/String Comparison Operators/1'>
String Comparison Operators
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_String Comparison Operators/Entry/Begins with/0'>
<td class='description' colspan='2'>
<div class='name'><p>Begins with</p>
</div>
<div class='notes'><p>Left hand expression begins with the right hand expression</p>
<pre class="highlight objective_c"><span class="n">BEGINSWITH</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_String Comparison Operators/Entry/Contains/0'>
<td class='description' colspan='2'>
<div class='name'><p>Contains</p>
</div>
<div class='notes'><p>Left hand expression contains the right hand expression</p>
<pre class="highlight objective_c"><span class="n">CONTAINS</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_String Comparison Operators/Entry/Ends with/0'>
<td class='description' colspan='2'>
<div class='name'><p>Ends with</p>
</div>
<div class='notes'><p>Left hand expression ends with the right hand expression</p>
<pre class="highlight objective_c"><span class="n">ENDSWITH</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_String Comparison Operators/Entry/Like/0'>
<td class='description' colspan='2'>
<div class='name'><p>Like</p>
</div>
<div class='notes'><p>Left hand expression equals the right hand expression: <code>?</code> and <code>*</code> are allowed as wildcard characters, where <code>?</code> matches 1 character and <code>*</code> matches 0 or more characters</p>
<pre class="highlight objective_c"><span class="n">LIKE</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_String Comparison Operators/Entry/Matches/0'>
<td class='description' colspan='2'>
<div class='name'><p>Matches</p>
</div>
<div class='notes'><p>Left hand expression equals the right hand expression using a regex - style comparison</p>
<pre class="highlight objective_c"><span class="n">MATCHES</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_String Comparison Operators/Entry/Example/0'>
<td class='description' colspan='2'>
<div class='name'><p>Example</p>
</div>
<div class='notes'><pre class="highlight objective_c"><span class="p">[</span><span class="n">NSPredicate</span> <span class="nf">predicateWithFormat</span><span class="p">:</span> <span class="s">@"name BEGINSWITH 'm'"</span><span class="p">]</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Aggregate Operators/1'>
Aggregate Operators
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Aggregate Operators/Entry/Some, any/0'>
<td class='description' colspan='2'>
<div class='name'><p>Some, any</p>
</div>
<div class='notes'><p>Returns objects where <code>ANY</code> or <code>SOME</code> of the predicate results are true.</p>
<pre class="highlight objective_c"><span class="n">ANY</span><span class="p">,</span><span class="n">SOME</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Aggregate Operators/Entry/All/0'>
<td class='description' colspan='2'>
<div class='name'><p>All</p>
</div>
<div class='notes'><p>Returns objects where <code>ALL</code> of the predicate results are true.</p>
<pre class="highlight objective_c"><span class="n">ALL</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Aggregate Operators/Entry/None/0'>
<td class='description' colspan='2'>
<div class='name'><p>None</p>
</div>
<div class='notes'><p>Returns objects where <code>NONE</code> of the predicate results are true.</p>
<pre class="highlight objective_c"><span class="n">NONE</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Aggregate Operators/Entry/Example/0'>
<td class='description' colspan='2'>
<div class='name'><p>Example</p>
</div>
<div class='notes'><pre class="highlight objective_c"><span class="p">[</span><span class="n">NSPredicate</span> <span class="nf">predicateWithFormat</span><span class="p">:</span> <span class="s">@"ALL expenses &gt; 1000"</span><span class="p">]</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Array Operations/1'>
Array Operations
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Array Operations/Entry/Array index/0'>
<td class='description' colspan='2'>
<div class='name'><p>Array index</p>
</div>
<div class='notes'><p>Specifies the element at the specified index in the array</p>
<pre class="highlight objective_c"><span class="n">array</span><span class="p">[</span><span class="nf">index</span><span class="p">]</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Array Operations/Entry/Array first/0'>
<td class='description' colspan='2'>
<div class='name'><p>Array first</p>
</div>
<div class='notes'><p>Specifies the first element in the array</p>
<pre class="highlight objective_c"><span class="n">array</span><span class="p">[</span><span class="nf">FIRST</span><span class="p">]</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Array Operations/Entry/Array last/0'>
<td class='description' colspan='2'>
<div class='name'><p>Array last</p>
</div>
<div class='notes'><p>Specifies the last element in the array</p>
<pre class="highlight objective_c"><span class="n">array</span><span class="p">[</span><span class="nf">LAST</span><span class="p">]</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Array Operations/Entry/Array size/0'>
<td class='description' colspan='2'>
<div class='name'><p>Array size</p>
</div>
<div class='notes'><p>Specifies the size of the array</p>
<pre class="highlight objective_c"><span class="n">array</span><span class="p">[</span><span class="nf">Size</span><span class="p">]</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Array Operations/Entry/Example/0'>
<td class='description' colspan='2'>
<div class='name'><p>Example</p>
</div>
<div class='notes'><p>Let&#39;s say we have a person with many dogs. <code>index</code> should be replaced with a number which will return the dog that you want to check against.</p>
<pre class="highlight objective_c"><span class="c1">// Here we're checking if the first dog's age is 5.</span>&#x000A;<span class="p">[</span><span class="n">NSPredicate</span> <span class="nf">predicateWithFormat</span><span class="p">:</span> <span class="s">@"dogs[0].age = 5"</span><span class="p">]</span>&#x000A;<span class="c1">// Here we're checking if a person has 3 dogs</span>&#x000A;<span class="p">[</span><span class="n">NSPredicate</span> <span class="nf">predicateWithFormat</span><span class="p">:</span> <span class="s">@"dogs[SIZE] = 3"</span><span class="p">]</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Subqueries/1'>
Subqueries
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Subqueries/Entry/Subquery/0'>
<td class='description' colspan='2'>
<div class='name'><p>Subquery</p>
</div>
<div class='notes'><p>Iterates through the collection to return qualifying queries</p>

<ul>
<li><code>collection</code> - array or set of objects</li>
<li><code>variableName</code> - variable that represents an iterated object</li>
<li><code>predicateFormat</code> - predicate that runs using the variableName</li>
</ul>
<pre class="highlight objective_c"><span class="n">SUBQUERY</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">variableName</span><span class="p">,</span> <span class="n">predicateFormat</span><span class="p">)</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Subqueries/Entry/Example/0'>
<td class='description' colspan='2'>
<div class='name'><p>Example</p>
</div>
<div class='notes'><p>Assume this was run on an array of projects. It will return projects with tasks that were not completed by user Alex</p>
<pre class="highlight objective_c"><span class="p">[</span><span class="n">NSPredicate</span> <span class="nf">predicateWithFormat</span><span class="p">:</span> <span class="s">@"SUBQUERY(tasks, $task, $task.completionDate != nil AND $task.user = 'Alex') .@count &gt; 0"</span><span class="p">]</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Tip, Tricks and Examples/1'>
Tip, Tricks and Examples
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Tip, Tricks and Examples/Entry/Common mistakes/0'>
<td class='description' colspan='2'>
<div class='name'><p>Common mistakes</p>
</div>
<div class='notes'><ul>
<li>Using <code>[NSString stringWithFormat:]</code> to build predicates is prone to have non-escaped diacritics or artifacts like an apostrophe. Use <code>[NSPredicate predicateWithFormat:]</code> instead.</li>
<li>Using multiple <code>OR</code> instead of <code>IN</code>, results in repeatable code and can be less efficient</li>
<li>When using <code>REGEX</code> and <code>MATCHES</code>, make sure they are the last part of your predicate statement so it does less work. This way objects will be filtered before doing more heavy look ups</li>
</ul>
</div>
</td>
</tr>
<tr id='//dash_ref_Tip, Tricks and Examples/Entry/Using self/0'>
<td class='description' colspan='2'>
<div class='name'><p>Using self</p>
</div>
<div class='notes'><p>When using a predicate on an array, <code>SELF</code> refers to each object in the array.
Here&#39;s an example: Imagine you are a landlord figuring out which apartments have to pay their water bill.
If you have a list of all the city wide apartments that still need to pay called <code>addressesThatOweWaterBill</code>,
we can check that against our owned apartments, <code>myApartmentAddresses</code>.</p>
<pre class="highlight objective_c"><span class="n">NSPredicate</span> <span class="o">*</span><span class="n">billingPredicate</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSPredicate</span> <span class="nf">predicateWithFormat</span><span class="p">:</span> <span class="s">@"SELF IN %@"</span><span class="p">,</span> <span class="n">addressesThatOweWaterBill</span><span class="p">]</span>&#x000A;<span class="n">NSArray</span> <span class="o">*</span><span class="n">myApartmentsThatOweWaterBill</span> <span class="o">=</span> <span class="p">[</span><span class="n">myApartmentAddresses</span> <span class="nf">filteredArrayUsingPredicate</span><span class="p">:</span><span class="n">billingPredicate</span><span class="p">]</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Tip, Tricks and Examples/Entry/LIKE wildcard match with * and ?/0'>
<td class='description' colspan='2'>
<div class='name'><p>LIKE wildcard match with * and ?</p>
</div>
<div class='notes'><p><code>*</code> matches 0 or more characters. For example: Let&#39;s say we have an array of names we want to filter</p>
<pre class="highlight objective_c"><span class="p">@[</span><span class="s">@"Sarah"</span><span class="p">,</span> <span class="s">@"Silva"</span><span class="p">,</span> <span class="s">@"silva"</span><span class="p">,</span> <span class="s">@"Silvy"</span><span class="p">,</span> <span class="s">@"Silvia"</span><span class="p">,</span> <span class="s">@"Si*"</span><span class="p">]</span>&#x000A;&#x000A;<span class="n">predicateWithFormat</span><span class="o">:</span> <span class="s">@"SELF == %@"</span><span class="p">,</span> <span class="s">@"Sarah"</span>&#x000A;<span class="c1">// Will return “Sarah”</span>&#x000A;&#x000A;<span class="n">predicateWithFormat</span><span class="o">:</span> <span class="s">@"SELF LIKE[c] %@"</span><span class="p">,</span> <span class="s">"Si*"</span>&#x000A;<span class="c1">// Will return “Silva”, “silva”, “Silvy”, “Silvia”, “Si*”</span></pre>
<p><code>?</code> matches 1 character only</p>
<pre class="highlight objective_c"><span class="nl">predicateWithFormat:</span> <span class="s">@"SELF LIKE[c] %@"</span><span class="p">,</span> <span class="s">"Silv?"</span>&#x000A;<span class="c1">// Will return “Silva”, “silva”, “Silvy”</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Tip, Tricks and Examples/Entry/Quick tips/0'>
<td class='description' colspan='2'>
<div class='name'><p>Quick tips</p>
</div>
<div class='notes'><p><code>CFStringTransform</code> normalizes strings if diacritic insensitive isn&#39;t enough.
For example you could turn Japanese characters into a Latin alphabetic representation.
It&#39;s extremely powerful with a lot of methods that you can see here: <a href="http://nshipster.com/cfstringtransform/">http://nshipster.com/cfstringtransform/</a></p>

<p>Make sure your columns are indexed to improve performance of using IN operators</p>

<ul>
<li><p><code>[c]</code> case insensitive: lowercase &amp; uppercase values are treated the same</p></li>
<li><p><code>[d]</code> diacritic insensitive: special characters treated as the base character</p></li>
</ul>
<pre class="highlight objective_c"><span class="nl">predicateWithFormat:</span> <span class="s">@"name CONTAINS[c] 'f'"</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Tip, Tricks and Examples/Entry/Keypath collection queries/0'>
<td class='description' colspan='2'>
<div class='name'><p>Keypath collection queries</p>
</div>
<div class='notes'><p>Keypath collection queries work best when you work with a lot of numbers.
Being able to call the min or max, adding things up, and then filtering results are simpler when you only have to append an extra parameter.
By having an array of expenses, you can do a quick check on if something is below or above a range of allowed expenses.</p>
<pre class="highlight objective_c"><span class="p">[</span><span class="n">NSPredicate</span> <span class="nf">predicateWithFormat</span><span class="p">:</span> <span class="s">@"expenses.@avg.doubleValue &lt; 200"</span><span class="p">]</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Tip, Tricks and Examples/Entry/How subqueries work/0'>
<td class='description' colspan='2'>
<div class='name'><p>How subqueries work</p>
</div>
<div class='notes'><pre class="highlight plaintext">SUBQUERY(collection, variableName, predicate)</pre>
<p>A subquery takes a collection then iterates through each object (as <code>variableName</code>) checking the predicate against that object.
It works well if you have a collection (A) objects, and each object has a collection (B) other objects.
If you&#39;re trying to filter A based on 2 or more varying attributes of B.</p>
<pre class="highlight objective_c"><span class="nl">predicateWithFormat:</span> <span class="s">@"SUBQUERY(tasks, $task, $task.completionDate != nil AND $task.user = 'Alex') .@count &gt; 0"</span></pre>
<p><code>SUBQUERY(…)</code> returns an array. We need to check if its <code>count &gt; 0</code> to return the true or false value predicate expects.</p>
</div>
</td>
</tr>
</table>
</div>
</section>
<section class='notes'>
<h2>Notes</h2>
<ul>
<li>Based on a <a href="https://realm.io/news/nspredicate-cheatsheet/">cheat sheet</a> by <a href="https://realm.io/">Realm</a></li>
</ul>

</section>
</article>
<footer>
You can modify and improve this cheat sheet <a onclick="window.dash.openExternal_(this.href); return false;" href="http://cheat.kapeli.com">here</a>
</footer>
</body>
</html>
